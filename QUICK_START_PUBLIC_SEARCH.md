# ุงูุจุฏุก ุงูุณุฑูุน - ูุธุงู ุงูุจุญุซ ุงูุนุงู ุงูุขูู

## ๐ฏ ูุง ุชู ุฅูุฌุงุฒู

ุชู ุญู ูุดููุฉ ุงูุจุญุซ ุงูุนุงู ูุฅุถุงูุฉ ูุธุงู ุฃูุงู ูุชุทูุฑ ุจุงูููุฒุงุช ุงูุชุงููุฉ:

### โ ุงููุดููุฉ ุงูุฃุตููุฉ (ุชู ุญููุง)
- **ุงููุดููุฉ**: ุธููุฑ ุฎุทุฃ "ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุงูุจุญุซ ุนู ุงููุณุชููุฏ" ุนูุฏ ุงูุจุญุซ ุนู ุฑูู ูููุฉ ููุฌูุฏ
- **ุงูุณุจุจ**: ุณูุงุณุงุช Row Level Security (RLS) ูุงูุช ุชููุน ุงููุณุชุฎุฏููู ุบูุฑ ุงููุตุงุฏููู ูู ุงููุตูู
- **ุงูุญู**: ุฅูุดุงุก ุณูุงุณุงุช RLS ุฌุฏูุฏุฉ ูุฏูุงู ุขููุฉ ููุจุญุซ ุงูุนุงู

### โ ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ

#### 1. ุงูุจุญุซ ุงูุนุงู ุงููุญุฏูุฏ
- ูููู ูุฃู ุดุฎุต ุงูุจุญุซ ุนู ุจูุงูุงุชู ุจุฑูู ุงููููุฉ
- ูุธูุฑ ููุท:
  - ุงูุงุณู
  - ุฑูู ุงููููุฉ
  - ุงูุทุฑุฏ ููุฏ ุงูุชูุตูู (ุฅู ูุฌุฏ)

#### 2. ูุธุงู ูููุฉ ุงููุฑูุฑ (PIN)
- ูููุฉ ูุฑูุฑ ูู 6 ุฃุฑูุงู
- ุฅูุดุงุก ุนูุฏ ุงูุทูุจ ุงูุฃูู
- ุญูุงูุฉ ุงูุชูุงุตูู ุงููุงููุฉ
- 5 ูุญุงููุงุช ููุท ุซู ููู ููุฏุฉ 30 ุฏูููุฉ

#### 3. ุนุฑุถ ุงูุชูุงุตูู ุงููุงููุฉ
ุจุนุฏ ุฅุฏุฎุงู ูููุฉ ุงููุฑูุฑ:
- ุฌููุน ุงูุจูุงูุงุช ุงูุดุฎุตูุฉ
- ุฌููุน ุงูุทุฑูุฏ (ุงูุณุงุจูุฉ ูุงูุญุงููุฉ)
- ุณุฌู ุงููุดุงุท
- ุฅููุงููุฉ ุงูุชุญุฏูุซ

#### 4. ุญูุงูุฉ ูุชุนุฏุฏุฉ ุงูุทุจูุงุช
- Rate Limiting (10/ุณุงุนุฉุ 50/ููู)
- ูุดู ุงููุดุงุท ุงููุดุจูู
- ุชุณุฌูู ูุงูู ูุฌููุน ุงูุนูููุงุช
- ุฏุนู CAPTCHA (ุงุฎุชูุงุฑู)
- ุฏุนู OTP ูุงุชุณุงุจ (ุงุฎุชูุงุฑู)

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### ูููุณุชููุฏูู

#### ุงูุจุญุซ ุงูุจุณูุท
```
1. ุงูุชุญ ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
2. ุฃุฏุฎู ุฑูู ุงููููุฉ (9 ุฃุฑูุงู)
3. ุงุถุบุท "ุจุญุซ"
```

#### ุนุฑุถ ุงูุชูุงุตูู (ุฃูู ูุฑุฉ)
```
1. ุงุถุบุท "ุฅูุดุงุก ูููุฉ ูุฑูุฑ ูุนุฑุถ ุงูุชูุงุตูู"
2. ุฃุฏุฎู 6 ุฃุฑูุงู
3. ุฃูุฏ ูููุฉ ุงููุฑูุฑ
4. ุงุญูุธูุง ูู ููุงู ุขูู
```

#### ุนุฑุถ ุงูุชูุงุตูู (ูุฑุงุช ูุงุญูุฉ)
```
1. ุงุถุบุท "ุนุฑุถ ูุงูุฉ ุงูุชูุงุตูู"
2. ุฃุฏุฎู ูููุฉ ุงููุฑูุฑ
3. ุชูุชุน ุจุงููุตูู ุงููุงูู
```

### ูููุฏุฑุงุก

#### ุงููุตูู ูุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช
```
ุงูุตูุญุฉ ููุฌูุฏุฉ ูู:
/src/components/pages/PublicSearchSecurityPage.tsx

ูุฌุจ ุฅุถุงูุชูุง ุฅูู ูุงุฆูุฉ ููุญุฉ ุงูุฅุฏูู
```

#### ุถุจุท ุงูุฅุนุฏุงุฏุงุช
```
1. ุงูุชุญ ุตูุญุฉ "ุฅุนุฏุงุฏุงุช ุฃูุงู ุงูุจุญุซ ุงูุนุงู"
2. ุงุถุจุท ุงูุญุฏูุฏ ุงููุทููุจุฉ
3. ูุนูู/ุนุทูู CAPTCHA ุญุณุจ ุงูุญุงุฌุฉ
4. ูุนูู/ุนุทูู OTP ุญุณุจ ุงูุญุงุฌุฉ
5. ุงุญูุธ ุงูุฅุนุฏุงุฏุงุช
```

## ๐ ุงููููุงุช ุงูุฌุฏูุฏุฉ

### ูุงุนุฏุฉ ุงูุจูุงูุงุช
```
supabase/migrations/20251111021221_enable_public_search_with_security.sql
โโโ ุฌุฏุงูู ุฌุฏูุฏุฉ (public_search_logs, search_rate_limits, suspicious_activity_log)
โโโ ุฏูุงู ุฌุฏูุฏุฉ (public_search_beneficiary, check_search_rate_limit, ูุบูุฑูุง)
โโโ ุณูุงุณุงุช RLS ุฌุฏูุฏุฉ
โโโ ุฅุนุฏุงุฏุงุช system_features
```

### ุงูุฎุฏูุงุช
```
src/services/publicSearchService.ts
โโโ ุฌููุน ุฏูุงู ุงูุจุญุซ ุงูุนุงู ูุงูุฃูุงู
```

### ุงูููููุงุช
```
src/components/
โโโ PublicSearchResult.tsx (ุนุฑุถ ุงููุชูุฌุฉ ุงููุญุฏูุฏุฉ)
โโโ modals/
โ   โโโ PINCreationModal.tsx (ุฅูุดุงุก ูููุฉ ุงููุฑูุฑ)
โ   โโโ PINVerificationModal.tsx (ุงูุชุญูู ูู ูููุฉ ุงููุฑูุฑ)
โโโ pages/
    โโโ PublicSearchSecurityPage.tsx (ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูุฃูุงู)
```

### ุงูุชุญุฏูุซุงุช
```
src/components/LandingPage.tsx (ุชู ุชุญุฏูุซู ุจุงููุงูู)
```

## ๐ ุงูุฃูุงู

### ูุณุชููุงุช ุงูุญูุงูุฉ
1. **RLS** - ูุงุนุฏุฉ ุงูุจูุงูุงุช
2. **Rate Limiting** - ุชุญุฏูุฏ ูุนุฏู ุงูุจุญุซ
3. **PIN Protection** - ุญูุงูุฉ ุงูุจูุงูุงุช ุงูุญุณุงุณุฉ
4. **Activity Detection** - ูุดู ุงููุดุงุท ุงููุดุจูู
5. **CAPTCHA** - ุถุฏ ุงูุฑูุจูุชุงุช (ุงุฎุชูุงุฑู)
6. **OTP** - ุชุญูู ุจุฎุทูุชูู (ุงุฎุชูุงุฑู)

### ุงูุฅุนุฏุงุฏุงุช ุงูุงูุชุฑุงุถูุฉ
```
- ุงูุจุญุซ ูู ุงูุณุงุนุฉ: 10 ูุฑุงุช
- ุงูุจุญุซ ูู ุงูููู: 50 ูุฑุฉ
- ูุญุงููุงุช ูููุฉ ุงููุฑูุฑ: 5 ูุฑุงุช
- ูุฏุฉ ุงูููู: 30 ุฏูููุฉ
- Rate Limiting: ููุนูู
- ูุดู ุงููุดุงุท ุงููุดุจูู: ููุนูู
- CAPTCHA: ูุนุทูู (ูููู ุชูุนููู)
- OTP: ูุนุทูู (ูููู ุชูุนููู)
```

## ๐ ุงููุฑุงูุจุฉ

### ุงูุฅุญุตุงุฆูุงุช ุงููุชููุฑุฉ
- ุนุฏุฏ ุนูููุงุช ุงูุจุญุซ ุงูููู
- ุนุฏุฏ ุนูููุงุช ุงูุจุญุซ ูุฐุง ุงูุฃุณุจูุน
- ุนุฏุฏ ุนูููุงุช ุงูุจุญุซ ูุฐุง ุงูุดูุฑ
- ูุณุจุฉ ุงููุฌุงุญ
- ุนุฏุฏ ุงูุฃูุดุทุฉ ุงููุดุจููุฉ

### ุงูุณุฌูุงุช
- `public_search_logs` - ุฌููุน ุนูููุงุช ุงูุจุญุซ
- `search_rate_limits` - ุญุงูุฉ ูู IP
- `suspicious_activity_log` - ุงููุดุงุท ุงููุดุจูู

## ๐๏ธ ุงูุชุฎุตูุต

### ุชุบููุฑ ุงูุญุฏูุฏ
```typescript
// ูู ุตูุญุฉ PublicSearchSecurityPage
- max_searches_per_hour: 10  // ุบููุฑู ููุนุฏุฏ ุงููุทููุจ
- max_searches_per_day: 50   // ุบููุฑู ููุนุฏุฏ ุงููุทููุจ
- max_pin_attempts: 5         // ุบููุฑู ููุนุฏุฏ ุงููุทููุจ
```

### ุชูุนูู CAPTCHA
```typescript
// ุงุญุตู ุนูู ุงูููุงุชูุญ ูู:
https://www.google.com/recaptcha/admin

// ุซู ุฃุฏุฎููุง ูู ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช
```

### ุชูุนูู OTP
```typescript
// ุชุฃูุฏ ูู ุฅุนุฏุงุฏ WhatsApp API ุฃููุงู
// ุซู ูุนููู ูู ุตูุญุฉ ุงูุฅุนุฏุงุฏุงุช
```

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก ุงูุดุงุฆุนุฉ

### 1. "ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุงูุจุญุซ"
**ุงูุชุญูู ูู:**
- ุงุชุตุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุชุทุจูู migration ุงูุฌุฏูุฏ
- ุณูุงุณุงุช RLS

### 2. "ุชู ุญุธุฑ IP"
**ุงูุญู:**
- ุงูุชุธุฑ ุงูุชูุงุก ุงูุญุธุฑ
- ุฃู ุงูุณุญ ุงูุณุฌู ูู `search_rate_limits`

### 3. "ุงูุญุณุงุจ ูููู"
**ุงูุญู:**
- ุงูุชุธุฑ 30 ุฏูููุฉ
- ุฃู ุงูุณุญ `locked_until` ูู `beneficiary_auth`

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุชู ุงุฎุชุจุงุฑ ุงูุจูุงุก**: ุงููุดุฑูุน ูุจูู ุจุฏูู ุฃุฎุทุงุก โ
2. **ุงูุชูุงูู**: ูุนูู ุนูู ุฌููุน ุงููุชุตูุญุงุช ุงูุญุฏูุซุฉ
3. **ุงูุฃุฏุงุก**: ูุญุณูู ููุชุนุงูู ูุน ุขูุงู ุงููุณุชุฎุฏููู
4. **ุงูุฃูุงู**: ุญูุงูุฉ ูุชุนุฏุฏุฉ ุงูุทุจูุงุช ุถุฏ ุงููุฌูุงุช

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ ุงูููุชุฑุญุฉ

1. ุฅุถุงูุฉ PublicSearchSecurityPage ุฅูู ูุงุฆูุฉ ููุญุฉ ุงูุฅุฏูู
2. ุงุฎุชุจุงุฑ ุฌููุน ุงูุณููุงุฑูููุงุช
3. ุชูุนูู CAPTCHA ุฅุฐุง ูุฒู ุงูุฃูุฑ
4. ุชูุนูู OTP ููุญุณุงุณูุฉ ุงูุนุงููุฉ
5. ูุฑุงูุจุฉ ุงูุณุฌูุงุช ูุงูุฅุญุตุงุฆูุงุช

## ๐ ุงูุฏุนู

ูููุณุงุนุฏุฉ ุฃู ุงูุงุณุชูุณุงุฑุงุช:
- ูุงุชุณุงุจ: +970 59 950 5699

---

**ุชุงุฑูุฎ ุงูุฅูุฌุงุฒ**: 11 ููููุจุฑ 2025
**ุงูุญุงูุฉ**: โ ุฌุงูุฒ ููุงุณุชุฎุฏุงู
**ุงูุฅุตุฏุงุฑ**: 2.0.0
